# Kode 架构文档

本目录包含 Kode 项目的架构文档，帮助开发者理解项目的整体结构、模块划分和设计理念。

## 文档列表

### 1. [总览文档](overview.md)
- 项目概述和核心架构介绍
- 技术栈和架构特点
- 扩展机制和数据流

### 2. [模块详细划分](modules.md)  
- 详细的模块分类和职责说明
- 各模块的位置和功能描述
- 模块依赖关系和扩展点

### 3. [架构图](architecture-diagram.md)
- 整体架构图（Mermaid 语法）
- 工具系统架构图
- 命令系统架构图
- 数据流架构图
- 技术栈架构图
- 模块依赖关系图

## 核心架构特点

### 分层架构
Kode 采用清晰的分层架构设计：
1. **用户界面层**: CLI 入口和 React 组件
2. **核心业务层**: 命令系统和工具系统
3. **服务层**: AI 服务、MCP 服务、配置服务
4. **基础设施层**: 工具集、类型定义、常量定义

### 模块化设计
- **工具系统**: 20+ 种工具，涵盖文件操作、代码分析、系统操作等
- **命令系统**: 30+ 个命令，包括配置管理、开发辅助、身份验证等
- **服务层**: 专业的服务模块，支持 AI 集成和监控

### 扩展性
- 插件化架构，支持 MCP 协议集成
- 模块化的工具和命令系统，易于扩展
- 清晰的接口定义，便于自定义开发

## 技术栈

- **运行时**: Node.js (≥18.0.0), Bun
- **UI 框架**: React + Ink (终端 React 渲染)
- **构建工具**: TypeScript, Prettier
- **AI 集成**: Anthropic Claude, OpenAI, MCP 协议
- **监控**: Sentry 错误监控, Statsig 功能标志

## 开发指南

### 添加新工具
1. 在 `src/tools/` 创建新工具目录
2. 实现工具逻辑和提示词
3. 在 `src/tools.ts` 中注册工具

### 添加新命令  
1. 在 `src/commands/` 创建新命令文件
2. 实现命令逻辑
3. 在 `src/commands.ts` 中注册命令

### 添加新服务
1. 在 `src/services/` 创建新服务文件
2. 实现服务逻辑
3. 在相关模块中集成服务

## 架构原则

1. **单一职责**: 每个模块职责单一，便于维护
2. **依赖倒置**: 高层模块不依赖低层模块细节
3. **开闭原则**: 对扩展开放，对修改关闭
4. **接口隔离**: 使用小而专的接口

## 相关链接

- [项目 README](../README.md)
- [开发指南](../develop/README.md) 
- [用户指南](../user-guide/README.md)

这些文档将帮助您快速理解 Kode 项目的架构设计，便于参与开发和扩展功能。